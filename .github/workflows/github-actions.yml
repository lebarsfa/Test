#on: [push, pull_request]
on: 
    push:
        branches: '**'
        tags: '' # Restrict to blank tags
    pull_request:
jobs:
 # This job may be commented if a new release should not be created...
# deploy:
#    runs-on: ubuntu-latest
#    steps: 
#    - uses: actions/create-release@v1
#      id: create_release
#      env:
#        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#      with:
#        draft: true
#        tag_name: autotagname
#        release_name: autotagname
 matrix:
    runs-on: ${{ matrix.cfg.os }}
    container: ${{ matrix.cfg.container }}
    defaults:
        run:
            shell: ${{ matrix.cfg.shell }}
    strategy:
        matrix:
            cfg:
            - { os: ubuntu-18.04, shell: bash, arch: amd64, runtime: bionic, container: 'i386/ubuntu:bionic', desc: 'Ubuntu 18.04 x86' }
            - { os: ubuntu-16.04, shell: bash, arch: i386, runtime: xenial, container: 'i386/ubuntu:xenial', desc: 'Ubuntu 16.04 x86' }
    name: ${{ matrix.cfg.desc }}
    steps: 
    - uses: actions/checkout@v2
    - run: |
        cmake
        cmake --build .
